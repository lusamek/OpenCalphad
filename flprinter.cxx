// generated by Fast Light User Interface Designer (fluid) version 1.0304

#include "flprinter.h"
#include <stdio.h>
#include <stdlib.h>
#include "headerf.h"

Fl_Double_Window *win1=(Fl_Double_Window *)0;

static void cb_Close(Fl_Button*, void*) {
  exit( 0 );
}

static void cb_List(Fl_Button*, void*) {
  system( " cd ; lpstat -a > /tmp/flprinter.log ; flview /tmp/flprinter.log   "  );
}

static void cb_List1(Fl_Button*, void*) {
  system( " cd ; dmesg  > /tmp/flprinter.log ; flview /tmp/flprinter.log   "  );
}

Fl_Browser *preview_browser=(Fl_Browser *)0;

static void cb_Add(Fl_Button*, void*) {
  system( " cd ; xterm -e  system-config-printer     "  );
}

static void cb_File(Fl_Button*, void*) {
  system( "  screen -d -m flprintfile  "  );
}

#include <FL/Fl_Image.H>
static const unsigned char idata_hdd_mount[] =
{255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,
255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,
255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,
255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,
255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,
255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,66,66,60,0,85,83,98,171,
129,127,182,253,145,153,193,253,145,157,189,253,144,158,189,253,144,160,189,253,
145,160,189,253,147,161,189,253,149,163,189,253,154,167,189,253,157,168,192,253,
140,139,189,254,60,59,79,209,0,0,0,16,1,1,0,0,71,71,70,31,110,108,149,235,176,
177,255,255,187,201,255,255,186,204,255,255,186,206,255,255,186,209,255,255,186,
210,255,255,188,212,255,255,191,213,255,255,196,217,255,255,204,224,255,255,190,
193,255,255,106,102,151,252,2,2,0,97,0,0,0,0,65,65,65,62,126,125,176,248,179,
184,255,255,179,192,255,255,178,192,255,255,178,194,255,255,178,197,255,255,178,
199,255,255,178,201,255,255,179,201,255,255,182,203,255,255,188,210,255,255,192,
204,255,255,131,129,186,255,14,14,14,143,0,0,0,0,70,70,74,112,147,148,204,254,
185,190,255,255,179,188,255,255,179,191,255,255,179,193,255,255,179,196,255,255,
179,198,255,255,179,201,255,255,179,202,255,255,181,204,255,255,185,208,255,255,
192,212,255,255,155,158,217,255,30,29,39,182,0,0,0,0,80,80,93,152,160,162,227,
255,179,184,255,255,174,180,254,255,174,183,254,255,174,186,254,255,174,189,254,
255,174,192,255,255,174,194,254,255,180,200,255,255,181,199,253,255,180,197,252,
255,191,213,255,255,171,181,235,255,49,48,65,219,0,0,0,10,109,109,120,192,215,
217,242,255,221,222,248,255,214,216,242,255,211,214,239,255,209,212,236,255,207,
210,234,255,204,209,230,255,213,215,237,255,200,200,231,255,100,149,131,255,78,
144,103,255,176,186,208,255,210,209,232,255,80,79,88,238,4,6,3,38,143,143,148,
226,255,255,255,255,255,255,252,255,251,251,246,255,247,247,242,255,243,242,238,
255,239,238,234,255,245,242,238,255,231,223,232,255,113,155,123,255,59,176,32,
255,67,193,24,255,85,156,79,255,200,199,204,255,136,128,139,252,0,18,3,104,170,
170,175,246,251,251,250,255,239,239,239,255,238,238,238,255,238,238,238,255,236,
237,238,255,243,242,242,255,233,228,238,255,109,155,126,255,66,178,39,255,99,
208,45,255,109,212,54,255,102,215,57,255,89,163,89,255,90,146,101,255,11,61,13,
224,185,185,188,252,231,231,230,255,216,216,217,255,220,220,221,255,222,222,222,
255,226,225,225,255,224,218,227,255,103,152,118,255,72,187,43,255,118,224,60,
255,115,216,62,255,131,229,81,255,171,254,123,255,127,231,87,255,76,205,55,255,
20,78,18,237,189,189,195,253,244,244,243,255,215,215,215,255,217,217,216,255,
215,215,214,255,200,199,200,255,211,206,215,255,106,168,121,255,83,205,51,255,
139,242,80,255,129,232,77,255,149,244,102,255,181,255,144,255,197,255,156,255,
133,231,98,255,11,61,8,229,153,153,160,247,231,231,233,255,217,217,219,255,213,
213,215,255,211,211,213,255,200,200,201,255,219,216,220,255,211,210,219,255,76,
144,94,255,97,214,70,255,152,255,94,255,159,252,114,255,191,255,160,255,213,255,
183,255,128,219,107,255,4,50,4,223,40,40,46,122,51,51,57,218,53,53,59,220,53,53,
59,218,53,53,59,218,55,55,60,218,53,54,58,218,62,57,65,218,37,32,47,211,11,74,
26,242,112,220,85,255,179,255,128,255,213,255,184,255,247,255,226,255,132,209,
121,255,0,38,0,215,23,23,28,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,
0,0,0,0,19,2,25,14,83,18,224,103,204,84,255,159,243,122,255,159,228,133,255,
169,229,150,255,95,179,86,255,0,30,1,206,24,24,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,10,2,0,0,46,11,82,22,84,21,234,38,90,27,242,24,70,19,
235,15,61,11,231,9,52,6,225,6,39,4,220,1,8,1,127};
static Fl_Image *image_hdd_mount() {
  static Fl_Image *image = new Fl_RGB_Image(idata_hdd_mount, 16, 16, 4, 0);
  return image;
}

static const unsigned char idata_printer[] =
{142,142,163,0,142,142,163,0,142,142,163,0,137,137,159,0,182,182,197,207,
229,229,235,254,228,228,233,253,228,227,233,253,229,229,233,253,231,231,236,253,
229,229,236,254,82,82,89,178,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,150,0,127,
127,150,0,127,127,150,0,119,119,142,0,188,188,199,223,255,255,255,255,255,255,
255,255,255,255,255,255,253,254,255,255,250,253,255,255,249,250,251,255,83,82,
86,215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,73,77,0,96,96,107,0,114,114,133,0,
111,111,133,0,179,179,190,220,255,255,255,255,255,255,255,255,248,251,252,255,
242,246,250,255,238,245,250,255,243,246,248,255,81,80,83,210,0,0,0,0,5,5,4,0,8,
8,8,0,3,3,3,0,62,62,61,0,73,73,72,0,66,66,65,0,86,86,100,0,172,172,183,216,
255,255,255,255,250,252,254,255,242,246,250,255,237,243,249,255,232,240,249,255,
240,243,247,255,74,74,77,205,7,7,6,0,49,49,47,0,29,29,29,0,1,1,1,0,64,64,64,0,
71,71,71,0,55,55,53,0,47,47,45,53,163,163,168,238,255,255,255,255,245,249,253,
255,238,244,249,255,232,239,246,255,227,233,242,255,239,242,246,255,83,83,85,
229,19,20,18,37,48,49,46,0,23,23,23,0,1,1,1,0,64,64,64,23,90,90,90,169,128,128,
130,230,144,144,147,250,184,182,187,255,242,244,250,255,231,238,247,255,223,232,
242,255,219,226,237,255,216,220,231,255,224,224,231,255,164,162,166,255,142,142,
145,248,116,114,117,222,43,43,43,139,0,0,0,6,96,96,97,180,214,214,219,255,249,
249,255,255,227,227,232,255,175,187,203,255,200,221,242,255,203,221,241,255,203,
220,239,255,199,217,237,255,195,214,237,255,189,209,231,255,179,187,199,255,231,
229,238,255,222,230,238,255,172,173,180,255,23,23,23,147,149,149,149,238,251,
251,255,255,242,241,244,255,212,213,219,255,164,206,230,255,174,227,255,255,155,
216,253,255,136,209,253,255,124,205,253,255,120,203,254,255,109,201,255,255,135,
186,219,255,209,206,210,255,184,206,207,255,217,219,228,255,70,69,71,226,172,
172,173,249,255,255,255,255,245,239,239,255,192,205,219,255,84,176,242,255,40,
162,255,255,8,148,255,255,5,148,254,255,5,148,254,255,6,149,254,255,0,144,255,
255,49,151,232,255,219,218,222,255,239,236,240,255,238,238,244,255,93,94,96,238,
147,147,158,251,214,214,226,255,235,228,229,255,182,205,236,255,32,133,255,255,
11,121,255,255,10,122,255,255,9,121,255,255,9,121,255,255,12,124,255,255,16,
122,255,255,54,138,250,255,212,221,234,255,229,226,228,255,207,207,223,255,86,
86,92,239,138,138,148,248,188,188,209,255,184,183,200,255,170,172,192,255,148,
160,192,255,143,162,197,255,139,159,200,255,135,157,200,255,135,158,200,255,140,
161,200,255,144,162,195,255,156,164,190,255,177,178,193,255,185,185,203,255,188,
188,208,255,79,79,84,237,137,137,143,238,216,216,233,255,168,169,181,255,73,72,
72,255,113,108,103,255,121,115,109,255,121,113,107,255,121,114,107,255,121,114,
107,255,119,113,107,255,122,116,110,255,99,95,91,255,90,90,93,255,200,200,214,
255,208,208,223,255,68,68,71,231,104,104,107,208,245,245,255,255,215,215,221,
255,163,163,166,255,224,224,226,255,226,226,228,255,221,222,223,255,219,220,222,
255,217,217,220,255,215,215,219,255,217,218,222,255,199,199,202,255,161,161,165,
255,242,242,249,255,216,216,223,255,39,39,39,210,32,32,32,90,135,135,138,244,
171,171,177,254,232,232,241,255,255,255,255,255,248,248,251,255,244,244,249,255,
241,241,247,255,238,238,244,255,235,235,241,255,230,230,238,255,237,237,245,255,
199,199,207,255,166,166,170,254,100,100,102,247,3,3,3,118,8,8,7,0,0,0,0,37,96,
96,105,197,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,
254,255,255,251,251,255,255,248,248,254,255,244,244,251,255,255,255,255,255,211,
211,215,255,17,17,19,184,0,0,0,58,0,0,0,2,3,3,2,0,45,45,51,0,134,134,148,143,
137,137,140,240,137,137,142,239,136,136,141,239,135,135,139,239,133,133,137,239,
130,130,136,239,128,128,133,239,126,126,131,239,126,126,130,239,121,121,125,242,
25,25,28,151,0,0,0,0,0,0,0,0};
static Fl_Image *image_printer() {
  static Fl_Image *image = new Fl_RGB_Image(idata_printer, 16, 16, 4, 0);
  return image;
}

Fl_Double_Window* make_window() {
  { win1 = new Fl_Double_Window(335, 220, "Screen");
    { Fl_Button* o = new Fl_Button(10, 190, 315, 20, "&Close");
      o->labelfont(1);
      o->callback((Fl_Callback*)cb_Close);
    } // Fl_Button* o
    { Fl_Group* o = new Fl_Group(10, 40, 315, 145);
      o->box(FL_DOWN_BOX);
      { Fl_Button* o = new Fl_Button(20, 160, 120, 20, "List Printers");
        o->callback((Fl_Callback*)cb_List);
      } // Fl_Button* o
      { Fl_Button* o = new Fl_Button(210, 160, 105, 20, "List dmesg");
        o->callback((Fl_Callback*)cb_List1);
      } // Fl_Button* o
      { preview_browser = new Fl_Browser(20, 45, 295, 85);
        Fl_Group::current()->resizable(preview_browser);
        preview_browser->type( FL_HOLD_BROWSER );
      } // Fl_Browser* preview_browser
      { Fl_Button* o = new Fl_Button(145, 160, 60, 20, "Add...");
        o->callback((Fl_Callback*)cb_Add);
      } // Fl_Button* o
      { Fl_Button* o = new Fl_Button(20, 135, 295, 20, " File&browser and File Print");
        o->image( image_hdd_mount() );
        o->callback((Fl_Callback*)cb_File);
        o->align(Fl_Align(256));
      } // Fl_Button* o
      o->end();
    } // Fl_Group* o
    { Fl_Box* o = new Fl_Box(10, 5, 315, 25, " PRINTER");
      o->box(FL_ENGRAVED_BOX);
      o->image( image_printer() );
      o->labelfont(1);
      o->align(Fl_Align(256));
    } // Fl_Box* o
    win1->end();
    win1->resizable(win1);
  } // Fl_Double_Window* win1
  return win1;
}

int main( int argc, char *argv[]) {
  printf( " == FLTK == \n" );
  
  ////////////////////////////////////////////////////////
    if ( argc == 2)
    if ( strcmp( argv[1] , "" ) !=  0 )
    {
            chdir( argv[ 1 ] );
    }
  
    char mydirnow[2500];
    printf( "Current Directory: %s \n", getcwd( mydirnow, 2500 ) );
  
  
    make_window();
    
    preview_browser->clear();    
    
    system( " date > /tmp/flprinter.log ; lpstat -a >>   /tmp/flprinter.log  " );
    
    char filein[PATH_MAX];
    strncpy( filein, "/tmp/flprinter.log"  , PATH_MAX );
         
    
    int fetchi;
    FILE *fp5;
    FILE *fp6;
    char fetchline[PATH_MAX];
    char fetchlinetmp[PATH_MAX];
    
    if ( fexist( filein ) == 1 )
    {
      fp6 = fopen( filein , "rb");
      while( !feof(fp6) ) 
      {
            fgets(fetchlinetmp, PATH_MAX, fp6); 
            strncpy( fetchline, "" , PATH_MAX );
            for( fetchi = 0 ; ( fetchi <= strlen( fetchlinetmp ) ); fetchi++ )
              if ( fetchlinetmp[ fetchi ] != '\n' )
                fetchline[fetchi]=fetchlinetmp[fetchi];
                
            if ( !feof(fp6)  )
                preview_browser->add( fetchline );    
  
       }
       fclose( fp6 );
   }
   
   
   
    
    
    
    win1->show();
  
    Fl::run();
}
